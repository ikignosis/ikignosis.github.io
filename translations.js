// Translation strings for supported languages
// Usage: translations[lang][key]
const translations = {
    en: {
        title: "Purpose Born of Knowing",
        subtitle: "Blending <b>education</b> and artificial intelligence <i>technology</i>",
        ikignosis: "Ikignosis",
        ikignosis_phonetic: "/√≠-kee‚ÄëGNOH‚Äësis/",
        providing_services: "Offering services to:",
        seed_funding: "Seed Funding",
        seed_funding_desc: "Currently seeking seed funding partners to accelerate our mission.",
        founding_supporters: "Founding Supporters:",
        sponsored_project: "Sponsored projects",
        sponsored_project_desc: "Check out our open-source projects on GitHub:",
        email: "lamego.pinto@gmail.com",
        language: "üåê Language:",
        selected: "Selected:",
    },
    pt: {
        title: "Prop√≥sito Nascido do Saber",
        subtitle: "Unindo <b>educa√ß√£o</b> e tecnologia de intelig√™ncia artificial <i>tecnologia</i>",
        ikignosis: "Ikignosis",
        ikignosis_phonetic: "/√≠-kee‚ÄëGNOH‚Äësis/",
        providing_services: "Prestando servi√ßos para:",
        seed_funding: "Financiamento Semente",
        seed_funding_desc: "Buscando parceiros de financiamento semente para acelerar nossa miss√£o.",
        founding_supporters: "Apoiadores Fundadores:",
        sponsored_project: "Projeto patrocinado",
        sponsored_project_desc: "Confira nosso projeto open-source no GitHub:",
        email: "lamego.pinto@gmail.com",
        language: "üåê Idioma:",
        selected: "Selecionado:",
    },
    kk: {
        title: "–ë—ñ–ª—ñ–º–Ω–µ–Ω —Ç—É“ì–∞–Ω –º–∞“õ—Å–∞—Ç",
        subtitle: "<b>–ë—ñ–ª—ñ–º</b> –º–µ–Ω –∂–∞—Å–∞–Ω–¥—ã –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç <i>—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Å—ã–Ω</i> –±—ñ—Ä—ñ–∫—Ç—ñ—Ä—É",
        ikignosis: "Ikignosis",
        ikignosis_phonetic: "/√≠-kee‚ÄëGNOH‚Äësis/",
        providing_services: "“ö—ã–∑–º–µ—Ç –∫”©—Ä—Å–µ—Ç—ñ–ª–µ—Ç—ñ–Ω –µ–ª–¥–µ—Ä:",
        seed_funding: "–¢“±“õ—ã–º–¥—ã“õ “õ–∞—Ä–∂—ã–ª–∞–Ω–¥—ã—Ä—É",
        seed_funding_desc: "–ú–∏—Å—Å–∏—è–º—ã–∑–¥—ã –∂–µ–¥–µ–ª–¥–µ—Ç—É “Ø—à—ñ–Ω —Å–µ—Ä—ñ–∫—Ç–µ—Å—Ç–µ—Ä —ñ–∑–¥–µ–π–º—ñ–∑.",
        founding_supporters: "“ö“±—Ä—ã–ª—Ç–∞–π—à—ã–ª–∞—Ä:",
        sponsored_project: "–î–µ–º–µ—É—à—ñ–ª—ñ–∫ –∂–æ–±–∞",
        sponsored_project_desc: "GitHub-—Ç–∞“ì—ã –∞—à—ã“õ –∂–æ–±–∞–º—ã–∑–¥—ã “õ–∞—Ä–∞“£—ã–∑:",
        email: "lamego.pinto@gmail.com",
        language: "üåê –¢—ñ–ª:",
        selected: "–¢–∞“£–¥–∞–ª–¥—ã:",
    },
    de: {
        title: "Zweck geboren aus Wissen",
        subtitle: "Verbindung von <b>Bildung</b> und k√ºnstlicher Intelligenz <i>Technologie</i>",
        ikignosis: "Ikignosis",
        ikignosis_phonetic: "/√≠-kee‚ÄëGNOH‚Äësis/",
        providing_services: "Dienstleistungen f√ºr:",
        seed_funding: "Startfinanzierung",
        seed_funding_desc: "Wir suchen derzeit Partner f√ºr die Startfinanzierung zur Beschleunigung unserer Mission.",
        founding_supporters: "Gr√ºndungsunterst√ºtzer:",
        sponsored_project: "Gesponsertes Projekt",
        sponsored_project_desc: "Schauen Sie sich unser Open-Source-Projekt auf GitHub an:",
        email: "lamego.pinto@gmail.com",
        language: "üåê Sprache:",
        selected: "Ausgew√§hlt:",
    },
    fr: {
        title: "But n√© de la connaissance",
        subtitle: "Fusion de <b>l'√©ducation</b> et de la technologie d'intelligence artificielle <i>technologie</i>",
        ikignosis: "Ikignosis",
        ikignosis_phonetic: "/√≠-kee‚ÄëGNOH‚Äësis/",
        providing_services: "Services propos√©s aux:",
        seed_funding: "Financement initial",
        seed_funding_desc: "Recherche actuelle de partenaires de financement initial pour acc√©l√©rer notre mission.",
        founding_supporters: "Fondateurs soutiens:",
        sponsored_project: "Projet parrain√©",
        sponsored_project_desc: "D√©couvrez notre projet open-source sur GitHub:",
        email: "lamego.pinto@gmail.com",
        language: "üåê Langue:",
        selected: "S√©lectionn√©:",
    },
    ru: {
        title: "–¶–µ–ª—å, —Ä–æ–∂–¥–µ–Ω–Ω–∞—è –∑–Ω–∞–Ω–∏–µ–º",
        subtitle: "–°–æ—á–µ—Ç–∞–Ω–∏–µ <b>–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</b> –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ <i>—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</i>",
        ikignosis: "Ikignosis",
        ikignosis_phonetic: "/√≠-kee‚ÄëGNOH‚Äësis/",
        providing_services: "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥ –¥–ª—è:",
        seed_funding: "–°–∏–¥–æ–≤–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ",
        seed_funding_desc: "–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –∏—â–µ–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –¥–ª—è —Å–∏–¥–æ–≤–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –Ω–∞—à–µ–π –º–∏—Å—Å–∏–∏.",
        founding_supporters: "–£—á—Ä–µ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —Å–ø–æ–Ω—Å–æ—Ä—ã:",
        sponsored_project: "–°–ø–æ–Ω—Å–∏—Ä—É–µ–º—ã–π –ø—Ä–æ–µ–∫—Ç",
        sponsored_project_desc: "–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –Ω–∞ GitHub:",
        email: "lamego.pinto@gmail.com",
        language: "üåê –Ø–∑—ã–∫:",
        selected: "–í—ã–±—Ä–∞–Ω–æ:",
    }
};

function getLangFromUrlOrBrowser() {
    const match = window.location.pathname.match(/^\/(en_US|pt_PT|kk_KZ|de_DE|fr_FR|ru_RU)(\/|$)/);
    if (match) {
        return match[1].slice(0,2);
    }
    // Try browser language
    const browserLang = (navigator.language || navigator.userLanguage || 'en').slice(0,2);
    if (["en","pt","kk","de","fr","ru"].includes(browserLang)) {
        return browserLang;
    }
    return 'en';
}

function setTranslations(lang) {
    const t = translations[lang] || translations['en'];
    const setTitle = (id, text, useInnerHTML = false) => {
        const el = document.getElementById(id);
        if (el) {
            if (useInnerHTML) {
                el.innerHTML = text;
            } else {
                el.textContent = text;
            }
        }
    };

    setTitle('main-title', t.title, true);
    setTitle('subtitle', t.subtitle, true);
    setTitle('ikignosis', t.ikignosis);
    setTitle('ikignosis-phonetic', t.ikignosis_phonetic);
    setTitle('providing-services', t.providing_services);
    setTitle('seed-funding', t.seed_funding);
    setTitle('seed-funding-desc', t.seed_funding_desc);
    setTitle('founding-supporters', t.founding_supporters);
    setTitle('sponsored-project', t.sponsored_project);
    setTitle('sponsored-project-desc', t.sponsored_project_desc);
    setTitle('email-link', t.email);
    setTitle('language-label', t.language);
    // Update language selector label
    const select = document.getElementById('language-select');
    const msg = document.getElementById('lang-msg');
    // No selected info needed
}

document.addEventListener('DOMContentLoaded', function() {
    let lang = getLangFromUrlOrBrowser();
    setTranslations(lang);
    const select = document.getElementById('language-select');
    if (select) {
        select.value = lang;
        select.addEventListener('change', function() {
            let langMap = {
                'en': 'en_US',
                'pt': 'pt_PT',
                'kk': 'kk_KZ',
                'de': 'de_DE',
                'fr': 'fr_FR',
                'ru': 'ru_RU'
            };
            let iso = langMap[this.value] || this.value;
            let path = window.location.pathname.replace(/^\/[a-z]{2}(_[A-Z]{2})?\//, '/');
            // Update URL without reloading
            try {
                window.history.pushState({}, '', `/${iso}${path}`);
            } catch (e) {
                // Fallback for local file:// URLs
                console.log('Language changed to:', this.value);
            }
            setTranslations(this.value);
        });
    }
});
